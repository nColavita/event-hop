<!DOCTYPE html>
<html>
<head>
  <title>EventHop</title>

	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
	<%= csrf_meta_tags %>

	<!-- jquery + randomized background
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

	<script type="text/javascript">
	 	$(document).ready(function() {
	 	    var bgArray = ['bg1.jpg', 'bg2.jpg', 'bg3.jpg'];
	 	    var bg = bgArray[Math.floor(Math.random() * bgArray.length)];
	 	    $('body').css('background', bg);
	 	}); 
	</script>
	-->

	<!-- google font -->
	<link href='https://fonts.googleapis.com/css?family=Josefin+Sans|Oleo+Script' rel='stylesheet' type='text/css'>
	<!-- google font -->

	<!-- Gmaps4rails -->
	<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
	<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
	<!-- Gmaps4rails -->

</head>
		<nav>
			<ul>
				<% if user_signed_in? %>
					<%= current_user.email %>
					<% if current_user[:admin] == true %>
						<%= link_to 'Create a new event', root_path %>
						<%= link_to 'create new place', new_place_path %> 
					<% end %>
					<%= link_to 'sign out', destroy_user_session_path, method: :delete %>
					<%= link_to 'Update Profile', edit_user_registration_path %>
					<%=  link_to 'profile', user_path(current_user.id) %>
				<% else %>
				<%# link_to 'sign up', new_user_registration_path %>
				<%# link_to 'sign in', new_user_session_path %>
				<% end %>
				<%# link_to 'Create a new event', root_path %>
			</ul>

			<p class="notice"><%= notice %></p>
			<p class="alert"><%= alert %></p>
		</nav>

			<div class="wrap">

			<%= yield %>

			<!-- jQuery to handle the created of the map -->
				<script type="text/javascript">
					handler = Gmaps.build('Google');
					handler.buildMap(
						{provider: {}, internal: {id: 'map'}},
						function() {
							markers = handler.addMarkers(<%= raw @hash.to_json %>);
							handler.bounds.extendWith(markers);
							handler.fitMapToBounds();
						});
				</script>
			<!-- jQuery to handle the created of the map -->

		</div>
</body>
</html>